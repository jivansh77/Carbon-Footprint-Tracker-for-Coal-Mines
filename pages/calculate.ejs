<% layout("../layouts/boilerplate") %>

<style>
  body {
    font-family: 'Roboto', sans-serif;
    background: #E3FAE3;
    color: #142114;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }

  .container {
    padding: 40px;
    position: relative;
    overflow: hidden;
  }

  #calcBox {
    background: #ffffff;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    padding: 30px;
    margin-top: 20px;
  }

  .header-title {
    font-size: 3rem;
    color: #142114;
    margin-bottom: 30px;
    text-align: center;
    font-weight: 700;
    line-height: 1.2;
  }

  .form {
    margin: 0 auto;
  }

  .form-group {
    margin-bottom: 20px;
  }

  .addmine .form-label {
    font-size: 1.1rem;
    color: #555;
    margin-bottom: 8px;
    display: block;
  }

  .addmine .form-control, .addmine .form-select {
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    border: 1px solid #ddd;
    font-size: 1rem;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .resultBox {
    display: none;
    margin-top: 30px;
    padding: 15px;
    background: #e9ecef;
    border-radius: 8px;
    font-size: 1.25rem;
    text-align: center;
    color: #333;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  }

  .tab-container {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
  }

  .tab {
    padding: 10px 20px;
    cursor: pointer;
    font-size: 1.2rem;
    color: #142114;
    border: 1px solid #ddd;
    border-radius: 8px;
    background-color: #ffffff;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    transition: background-color 0.3s ease;
  }

  .tab.active {
    background-color: #138757;
    color: #ffffff;
  }

  .tab-content {
    display: none;
    animation: animate 0.3s ease forwards;
  }

  .tab-content.active {
    display: block;
  }

  .progressBar{
    position: relative;
    margin-bottom: 40px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .progressBar::before{
    content: "";
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    height: 8px;
    width: 100%;
    background-color: #ddd;
    
  }

  .progress-step{
    width: 50px;
    height: 50px;
    background-color: #ddd;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1;
  }

  .progress-step::before{
    
  }

  @keyframes animate {
    from {
        transform: translateX(-5%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
 }
  

</style>



<div class="container-fluid">
  <div class="row">
    <div class="col-8 offset-2">
      <div id="calcBox">
        <div class="mt-4">
          <h1 class="text-center mb-4 header-title">Carbon Footprint Calculator</h1>

          <!-- Progress Bar -->
          <div class="progressBar">
            <div class="progress-step" data-title="Direct Emissions"><svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" fill="currentColor" class="bi bi-minecart-loaded" viewBox="0 0 16 16">
              <path d="M4 15a1 1 0 1 1 0-2 1 1 0 0 1 0 2m0 1a2 2 0 1 0 0-4 2 2 0 0 0 0 4m8-1a1 1 0 1 1 0-2 1 1 0 0 1 0 2m0 1a2 2 0 1 0 0-4 2 2 0 0 0 0 4M.115 3.18A.5.5 0 0 1 .5 3h15a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 14 12H2a.5.5 0 0 1-.491-.408l-1.5-8a.5.5 0 0 1 .106-.411zm.987.82 1.313 7h11.17l1.313-7z"/>
              <path fill-rule="evenodd" d="M6 1a2.498 2.498 0 0 1 4 0c.818 0 1.545.394 2 1 .67 0 1.552.57 2 1h-2c-.314 0-.611-.15-.8-.4-.274-.365-.71-.6-1.2-.6-.314 0-.611-.15-.8-.4a1.497 1.497 0 0 0-2.4 0c-.189.25-.486.4-.8.4-.507 0-.955.251-1.228.638q-.136.194-.308.362H3c.13-.147.401-.432.562-.545a1.6 1.6 0 0 0 .393-.393A2.5 2.5 0 0 1 6 1"/>
            </svg></div>
            <div class="progress-step" data-title="Electricity Use"><svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" fill="currentColor" class="bi bi-lightning" viewBox="0 0 16 16">
              <path d="M5.52.359A.5.5 0 0 1 6 0h4a.5.5 0 0 1 .474.658L8.694 6H12.5a.5.5 0 0 1 .395.807l-7 9a.5.5 0 0 1-.873-.454L6.823 9.5H3.5a.5.5 0 0 1-.48-.641zM6.374 1 4.168 8.5H7.5a.5.5 0 0 1 .478.647L6.78 13.04 11.478 7H8a.5.5 0 0 1-.474-.658L9.306 1z"/>
            </svg></div>
            <div class="progress-step" data-title="Transport & Others"><svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" fill="currentColor" class="bi bi-truck" viewBox="0 0 16 16">
              <path d="M0 3.5A1.5 1.5 0 0 1 1.5 2h9A1.5 1.5 0 0 1 12 3.5V5h1.02a1.5 1.5 0 0 1 1.17.563l1.481 1.85a1.5 1.5 0 0 1 .329.938V10.5a1.5 1.5 0 0 1-1.5 1.5H14a2 2 0 1 1-4 0H5a2 2 0 1 1-3.998-.085A1.5 1.5 0 0 1 0 10.5zm1.294 7.456A2 2 0 0 1 4.732 11h5.536a2 2 0 0 1 .732-.732V3.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .294.456M12 10a2 2 0 0 1 1.732 1h.768a.5.5 0 0 0 .5-.5V8.35a.5.5 0 0 0-.11-.312l-1.48-1.85A.5.5 0 0 0 13.02 6H12zm-9 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m9 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2"/>
            </svg></div>
            <div class="progress-step" data-title="Deforestation"><svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" fill="currentColor" class="bi bi-tree" viewBox="0 0 16 16">
              <path d="M8.416.223a.5.5 0 0 0-.832 0l-3 4.5A.5.5 0 0 0 5 5.5h.098L3.076 8.735A.5.5 0 0 0 3.5 9.5h.191l-1.638 3.276a.5.5 0 0 0 .447.724H7V16h2v-2.5h4.5a.5.5 0 0 0 .447-.724L12.31 9.5h.191a.5.5 0 0 0 .424-.765L10.902 5.5H11a.5.5 0 0 0 .416-.777zM6.437 4.758A.5.5 0 0 0 6 4.5h-.066L8 1.401 10.066 4.5H10a.5.5 0 0 0-.424.765L11.598 8.5H11.5a.5.5 0 0 0-.447.724L12.69 12.5H3.309l1.638-3.276A.5.5 0 0 0 4.5 8.5h-.098l2.022-3.235a.5.5 0 0 0 .013-.507"/>
            </svg></div>
            <div class="progress-step" data-title="Results"><svg xmlns="http://www.w3.org/2000/svg" width="2" height="16" fill="currentColor" class="bi bi-check2-circle" viewBox="0 0 16 16">
              <path d="M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0"/>
              <path d="M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z"/>
            </svg></div>
          </div>

          <div class="tab-container">
            <div class="tab active" data-tab="directEmissionTab">Direct Emissions</div>
            <div class="tab" data-tab="electricityUseTab">Energy Consumption</div>
            <div class="tab" data-tab="transportTab">Supply Chain</div>
            <div class="tab" data-tab="deforestationTab">Land Use</div>
            <div class="tab" data-tab="resultsTab">Results</div>
          </div>

          

          <!-- Direct Emission Content -->
          <div id="directEmissionTab" class="tab-content active">
            <form>
              <div class="mb-4">
                <label for="qty" class="form-label">Coal Quantity (in kg):</label>
                <input type="number" class="form-control" id="qty">
              </div>

              <div class="mb-4">
                <label for="type" class="form-label">Type of Coal:</label>
                <select id="type" class="form-select">
                  <option class="text-secondary" selected>---Select Type of Coal---</option>
                  <option>Bituminous</option>
                  <option>Anthracite</option>
                </select>
              </div>
              <button type="button" class="btn btn-success mt-4" id="subButton">Submit</button>
            </form>

            <div id="directEmissionResultBox" class="resultBox"></div>
          </div>

          <!-- Electricity Use Content -->
          <div id="electricityUseTab" class="tab-content">
            <form>
              <div class="mb-4">
                <label for="electricity" class="form-label">Electricity Consumed (in kWh):</label>
                <input type="number" class="form-control" id="electricity">
              </div>
              <button type="button" class="btn btn-success mt-4" id="electricityButton">Submit</button>
            </form>

            <div id="electricityResultBox" class="resultBox"></div>
          </div>

          <!-- Transport & Others Content -->
          <div id="transportTab" class="tab-content">
            <form>
              <div class="mb-4">
                <label for="transport" class="form-label">Transport Distance (in km):</label>
                <input type="number" class="form-control" id="transport">
              </div>
              <div class="mb-4">
                <label for="equipment" class="form-label">Equipment Use (in hours):</label>
                <input type="number" class="form-control" id="equipment">
              </div>
              <div class="mb-4">
                <label for="waste" class="form-label">Waste Management (in kg):</label>
                <input type="number" class="form-control" id="waste">
              </div>
              <div class="mb-4">
                <label for="employees" class="form-label">Employee Count:</label>
                <input type="number" class="form-control" id="employees">
              </div>
              <div class="mb-4">
                <label for="endUse" class="form-label">End Use of Coal (in kg):</label>
                <input type="number" class="form-control" id="endUse">
              </div>
              <button type="button" class="btn btn-success mt-4" id="transportButton">Submit</button>
            </form>

            <div id="transportResultBox" class="resultBox"></div>
          </div>

          <!-- Deforestation Content -->
          <div id="deforestationTab" class="tab-content">
            <form>
              <div class="mb-4">
                <label for="deforestedArea" class="form-label">Deforested Area (in hectares):</label>
                <input type="number" class="form-control" id="deforestedArea">
              </div>
              <button type="button" class="btn btn-success mt-4" id="deforestationButton">Submit</button>
            </form>

            <div id="deforestationResultBox" class="resultBox"></div>
          </div>

          <!-- Results Content -->
          <div id="resultsTab" class="tab-content">
            <div class="mb-4">
              <h3 class="text-center text-success mb-3"><b>Carbon Footprint Results</b></h3>
              <p class="text-center" id="directEmissionResult">Direct Emissions: 0 kg CO<sub>2</sub></p>
              <p class="text-center" id="electricityResult">Electricity Use: 0 kg CO<sub>2</sub></p>
              <p class="text-center" id="transportResult">Supply Chain: 0 kg CO<sub>2</sub></p>
              <p class="text-center" id="deforestationResult">Deforestation: 0 kg CO<sub>2</sub></p>
              <hr>
              <h4 class="text-center" id="totalResult">Total: 0 kg CO<sub>2</sub></h4>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  const tabs = document.querySelectorAll(".tab");
  const tabContents = document.querySelectorAll(".tab-content");

  let directEmission = 0;
  let electricityEmission = 0;
  let transportEmission = 0;
  let deforestationEmission = 0;

  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      tabs.forEach(t => t.classList.remove("active"));
      tabContents.forEach(content => content.classList.remove("active"));
      tab.classList.add("active");
      const activeTabContent = document.getElementById(tab.dataset.tab);
      activeTabContent.classList.add("active");
    });
  });

  document.querySelector("#subButton").addEventListener("click", () => {
    directEmission = calc(qty.value, type.value);
    document.getElementById("directEmissionResultBox").innerHTML = `Direct Emissions: ${directEmission.toFixed(2)} kg CO<sub>2</sub>`;
    document.getElementById("directEmissionResultBox").style.display = "block";
    updateTotalResult();
  });

  document.querySelector("#electricityButton").addEventListener("click", () => {
    electricityEmission = calcElectricity(document.querySelector("#electricity").value);
    document.getElementById("electricityResultBox").innerHTML = `Electricity Use: ${electricityEmission.toFixed(2)} kg CO<sub>2</sub>`;
    document.getElementById("electricityResultBox").style.display = "block";
    updateTotalResult();
  });

  document.querySelector("#transportButton").addEventListener("click", () => {
    transportEmission = calcTransport(
      document.querySelector("#transport").value,
      document.querySelector("#equipment").value,
      document.querySelector("#waste").value,
      document.querySelector("#employees").value,
      document.querySelector("#endUse").value
    );
    document.getElementById("transportResultBox").innerHTML = `Supply Chain and Other Activities: ${transportEmission.toFixed(2)} kg CO<sub>2</sub>`;
    document.getElementById("transportResultBox").style.display = "block";
    updateTotalResult();
  });

  document.querySelector("#deforestationButton").addEventListener("click", () => {
    deforestationEmission = calcDeforestation(document.querySelector("#deforestedArea").value);
    document.getElementById("deforestationResultBox").innerHTML = `Deforestation: ${deforestationEmission.toFixed(2)} kg CO<sub>2</sub>`;
    document.getElementById("deforestationResultBox").style.display = "block";
    updateTotalResult();
  });

  function updateTotalResult() {
    const total = directEmission + electricityEmission + transportEmission + deforestationEmission;
    document.getElementById("directEmissionResult").innerHTML = `Direct Emissions: ${directEmission.toFixed(2)} kg CO<sub>2</sub>`;
    document.getElementById("electricityResult").innerHTML = `Electricity Use: ${electricityEmission.toFixed(2)} kg CO<sub>2</sub>`;
    document.getElementById("transportResult").innerHTML = `Supply Chain: ${transportEmission.toFixed(2)} kg CO<sub>2</sub>`;
    document.getElementById("deforestationResult").innerHTML = `Deforestation: ${deforestationEmission.toFixed(2)} kg CO<sub>2</sub>`;
    document.getElementById("totalResult").innerHTML = `Total Carbon Footprint: ${total.toFixed(2)} kg CO<sub>2</sub>`;
  }

  // Existing calculation functions
  function calc(qty, type) {
    let pct;
    if (type === 'Bituminous') {
      pct = 70;
    } else if (type === 'Anthracite') {
      pct = 90;
    }
    let netCarb = (pct / 100) * qty;
    return (netCarb) * 3.67;
  }

  function calcElectricity(kWh) {
    return kWh * 0.5; // Placeholder: Adjust with actual conversion factor
  }

  function calcTransport(transportDistance, equipmentHours, wasteKg, employeeCount, endUseKg) {
    let transportEmission = transportDistance * 0.3; // Placeholder
    let equipmentEmission = equipmentHours * 0.4; // Placeholder
    let wasteEmission = wasteKg * 0.1; // Placeholder
    let employeeEmission = employeeCount * 0.2; // Placeholder
    let endUseEmission = endUseKg * 0.5; // Placeholder
    return transportEmission + equipmentEmission + wasteEmission + employeeEmission + endUseEmission;
  }

  function calcDeforestation(hectares) {
    return hectares * 10; // Placeholder: Adjust with actual conversion factor
  }
</script>